"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/resend";
exports.ids = ["vendor-chunks/resend"];
exports.modules = {

/***/ "(rsc)/./node_modules/resend/dist/index.mjs":
/*!********************************************!*\
  !*** ./node_modules/resend/dist/index.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Resend: () => (/* binding */ Resend)\n/* harmony export */ });\n/* harmony import */ var svix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! svix */ \"(rsc)/./node_modules/svix/dist/index.js\");\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\n\n// package.json\nvar version = \"6.4.1\";\n\n// src/common/utils/build-pagination-query.ts\nfunction buildPaginationQuery(options) {\n  const searchParams = new URLSearchParams();\n  if (options.limit !== void 0) {\n    searchParams.set(\"limit\", options.limit.toString());\n  }\n  if (\"after\" in options && options.after !== void 0) {\n    searchParams.set(\"after\", options.after);\n  }\n  if (\"before\" in options && options.before !== void 0) {\n    searchParams.set(\"before\", options.before);\n  }\n  return searchParams.toString();\n}\n\n// src/api-keys/api-keys.ts\nvar ApiKeys = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      \"/api-keys\",\n      payload,\n      options\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/api-keys?${queryString}` : \"/api-keys\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/api-keys/${id}`\n    );\n    return data;\n  }\n};\n\n// src/common/utils/parse-email-to-api-options.ts\nfunction parseAttachments(attachments) {\n  return attachments == null ? void 0 : attachments.map((attachment) => ({\n    content: attachment.content,\n    filename: attachment.filename,\n    path: attachment.path,\n    content_type: attachment.contentType,\n    content_id: attachment.contentId\n  }));\n}\nfunction parseEmailToApiOptions(email) {\n  return {\n    attachments: parseAttachments(email.attachments),\n    bcc: email.bcc,\n    cc: email.cc,\n    from: email.from,\n    headers: email.headers,\n    html: email.html,\n    reply_to: email.replyTo,\n    scheduled_at: email.scheduledAt,\n    subject: email.subject,\n    tags: email.tags,\n    text: email.text,\n    to: email.to,\n    template: email.template ? {\n      id: email.template.id,\n      variables: email.template.variables\n    } : void 0,\n    topic_id: email.topicId\n  };\n}\n\n// src/render.ts\nasync function render(node) {\n  let render2;\n  try {\n    ({ render: render2 } = await __webpack_require__.e(/*! import() */ \"_3d4e\").then(__webpack_require__.t.bind(__webpack_require__, /*! @react-email/render */ \"?3d4e\", 19)));\n  } catch (e) {\n    throw new Error(\n      \"Failed to render React component. Make sure to install `@react-email/render` or `@react-email/components`.\"\n    );\n  }\n  return render2(node);\n}\n\n// src/batch/batch.ts\nvar Batch = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async send(payload, options) {\n    return this.create(payload, options);\n  }\n  async create(payload, options) {\n    var _a;\n    const emails = [];\n    for (const email of payload) {\n      if (email.react) {\n        email.html = await render(email.react);\n        email.react = void 0;\n      }\n      emails.push(parseEmailToApiOptions(email));\n    }\n    const data = await this.resend.post(\n      \"/emails/batch\",\n      emails,\n      __spreadProps(__spreadValues({}, options), {\n        headers: __spreadValues({\n          \"x-batch-validation\": (_a = options == null ? void 0 : options.batchValidation) != null ? _a : \"strict\"\n        }, options == null ? void 0 : options.headers)\n      })\n    );\n    return data;\n  }\n};\n\n// src/broadcasts/broadcasts.ts\nvar Broadcasts = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    if (payload.react) {\n      payload.html = await render(payload.react);\n    }\n    const data = await this.resend.post(\n      \"/broadcasts\",\n      {\n        name: payload.name,\n        segment_id: payload.segmentId,\n        audience_id: payload.audienceId,\n        preview_text: payload.previewText,\n        from: payload.from,\n        html: payload.html,\n        reply_to: payload.replyTo,\n        subject: payload.subject,\n        text: payload.text,\n        topic_id: payload.topicId\n      },\n      options\n    );\n    return data;\n  }\n  async send(id, payload) {\n    const data = await this.resend.post(\n      `/broadcasts/${id}/send`,\n      { scheduled_at: payload == null ? void 0 : payload.scheduledAt }\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/broadcasts?${queryString}` : \"/broadcasts\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/broadcasts/${id}`\n    );\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/broadcasts/${id}`\n    );\n    return data;\n  }\n  async update(id, payload) {\n    if (payload.react) {\n      payload.html = await render(payload.react);\n    }\n    const data = await this.resend.patch(\n      `/broadcasts/${id}`,\n      {\n        name: payload.name,\n        segment_id: payload.segmentId,\n        audience_id: payload.audienceId,\n        from: payload.from,\n        html: payload.html,\n        text: payload.text,\n        subject: payload.subject,\n        reply_to: payload.replyTo,\n        preview_text: payload.previewText,\n        topic_id: payload.topicId\n      }\n    );\n    return data;\n  }\n};\n\n// src/common/utils/parse-contact-properties-to-api-options.ts\nfunction parseContactPropertyFromApi(contactProperty) {\n  return {\n    id: contactProperty.id,\n    key: contactProperty.key,\n    createdAt: contactProperty.created_at,\n    type: contactProperty.type,\n    fallbackValue: contactProperty.fallback_value\n  };\n}\nfunction parseContactPropertyToApiOptions(contactProperty) {\n  if (\"key\" in contactProperty) {\n    return {\n      key: contactProperty.key,\n      type: contactProperty.type,\n      fallback_value: contactProperty.fallbackValue\n    };\n  }\n  return {\n    fallback_value: contactProperty.fallbackValue\n  };\n}\n\n// src/contact-properties/contact-properties.ts\nvar ContactProperties = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(options) {\n    const apiOptions = parseContactPropertyToApiOptions(options);\n    const data = await this.resend.post(\n      \"/contact-properties\",\n      apiOptions\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/contact-properties?${queryString}` : \"/contact-properties\";\n    const response = await this.resend.get(url);\n    if (response.data) {\n      return {\n        data: __spreadProps(__spreadValues({}, response.data), {\n          data: response.data.data.map(\n            (apiContactProperty) => parseContactPropertyFromApi(apiContactProperty)\n          )\n        }),\n        headers: response.headers,\n        error: null\n      };\n    }\n    return response;\n  }\n  async get(id) {\n    if (!id) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const response = await this.resend.get(\n      `/contact-properties/${id}`\n    );\n    if (response.data) {\n      return {\n        data: __spreadValues({\n          object: \"contact_property\"\n        }, parseContactPropertyFromApi(response.data)),\n        headers: response.headers,\n        error: null\n      };\n    }\n    return response;\n  }\n  async update(payload) {\n    if (!payload.id) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const apiOptions = parseContactPropertyToApiOptions(payload);\n    const data = await this.resend.patch(\n      `/contact-properties/${payload.id}`,\n      apiOptions\n    );\n    return data;\n  }\n  async remove(id) {\n    if (!id) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const data = await this.resend.delete(\n      `/contact-properties/${id}`\n    );\n    return data;\n  }\n};\n\n// src/contacts/segments/contact-segments.ts\nvar ContactSegments = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async list(options) {\n    if (!options.contactId && !options.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const identifier = options.email ? options.email : options.contactId;\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/contacts/${identifier}/segments?${queryString}` : `/contacts/${identifier}/segments`;\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async add(options) {\n    if (!options.contactId && !options.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const identifier = options.email ? options.email : options.contactId;\n    return this.resend.post(\n      `/contacts/${identifier}/segments/${options.segmentId}`\n    );\n  }\n  async remove(options) {\n    if (!options.contactId && !options.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const identifier = options.email ? options.email : options.contactId;\n    return this.resend.delete(\n      `/contacts/${identifier}/segments/${options.segmentId}`\n    );\n  }\n};\n\n// src/contacts/topics/contact-topics.ts\nvar ContactTopics = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async update(payload) {\n    if (!payload.id && !payload.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const identifier = payload.email ? payload.email : payload.id;\n    return this.resend.patch(\n      `/contacts/${identifier}/topics`,\n      payload.topics\n    );\n  }\n  async list(options) {\n    if (!options.id && !options.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const identifier = options.email ? options.email : options.id;\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/contacts/${identifier}/topics?${queryString}` : `/contacts/${identifier}/topics`;\n    return this.resend.get(url);\n  }\n};\n\n// src/contacts/contacts.ts\nvar Contacts = class {\n  constructor(resend) {\n    this.resend = resend;\n    this.topics = new ContactTopics(this.resend);\n    this.segments = new ContactSegments(this.resend);\n  }\n  async create(payload, options = {}) {\n    if (!payload.audienceId) {\n      const data2 = await this.resend.post(\n        \"/contacts\",\n        {\n          unsubscribed: payload.unsubscribed,\n          email: payload.email,\n          first_name: payload.firstName,\n          last_name: payload.lastName,\n          properties: payload.properties\n        },\n        options\n      );\n      return data2;\n    }\n    const data = await this.resend.post(\n      `/audiences/${payload.audienceId}/contacts`,\n      {\n        unsubscribed: payload.unsubscribed,\n        email: payload.email,\n        first_name: payload.firstName,\n        last_name: payload.lastName,\n        properties: payload.properties\n      },\n      options\n    );\n    return data;\n  }\n  async list(options = {}) {\n    if (!(\"audienceId\" in options) || options.audienceId === void 0) {\n      const queryString2 = buildPaginationQuery(options);\n      const url2 = queryString2 ? `/contacts?${queryString2}` : \"/contacts\";\n      const data2 = await this.resend.get(url2);\n      return data2;\n    }\n    const _a = options, { audienceId } = _a, paginationOptions = __objRest(_a, [\"audienceId\"]);\n    const queryString = buildPaginationQuery(paginationOptions);\n    const url = queryString ? `/audiences/${audienceId}/contacts?${queryString}` : `/audiences/${audienceId}/contacts`;\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async get(options) {\n    if (typeof options === \"string\") {\n      return this.resend.get(`/contacts/${options}`);\n    }\n    if (!options.id && !options.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    if (!options.audienceId) {\n      return this.resend.get(\n        `/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`\n      );\n    }\n    return this.resend.get(\n      `/audiences/${options.audienceId}/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`\n    );\n  }\n  async update(options) {\n    if (!options.id && !options.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    if (!options.audienceId) {\n      const data2 = await this.resend.patch(\n        `/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`,\n        {\n          unsubscribed: options.unsubscribed,\n          first_name: options.firstName,\n          last_name: options.lastName,\n          properties: options.properties\n        }\n      );\n      return data2;\n    }\n    const data = await this.resend.patch(\n      `/audiences/${options.audienceId}/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`,\n      {\n        unsubscribed: options.unsubscribed,\n        first_name: options.firstName,\n        last_name: options.lastName,\n        properties: options.properties\n      }\n    );\n    return data;\n  }\n  async remove(payload) {\n    if (typeof payload === \"string\") {\n      return this.resend.delete(\n        `/contacts/${payload}`\n      );\n    }\n    if (!payload.id && !payload.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    if (!payload.audienceId) {\n      return this.resend.delete(\n        `/contacts/${(payload == null ? void 0 : payload.email) ? payload == null ? void 0 : payload.email : payload == null ? void 0 : payload.id}`\n      );\n    }\n    return this.resend.delete(\n      `/audiences/${payload.audienceId}/contacts/${(payload == null ? void 0 : payload.email) ? payload == null ? void 0 : payload.email : payload == null ? void 0 : payload.id}`\n    );\n  }\n};\n\n// src/common/utils/parse-domain-to-api-options.ts\nfunction parseDomainToApiOptions(domain) {\n  return {\n    name: domain.name,\n    region: domain.region,\n    custom_return_path: domain.customReturnPath\n  };\n}\n\n// src/domains/domains.ts\nvar Domains = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      \"/domains\",\n      parseDomainToApiOptions(payload),\n      options\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/domains?${queryString}` : \"/domains\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/domains/${id}`\n    );\n    return data;\n  }\n  async update(payload) {\n    const data = await this.resend.patch(\n      `/domains/${payload.id}`,\n      {\n        click_tracking: payload.clickTracking,\n        open_tracking: payload.openTracking,\n        tls: payload.tls\n      }\n    );\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/domains/${id}`\n    );\n    return data;\n  }\n  async verify(id) {\n    const data = await this.resend.post(\n      `/domains/${id}/verify`\n    );\n    return data;\n  }\n};\n\n// src/emails/attachments/attachments.ts\nvar Attachments = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async get(options) {\n    const { emailId, id } = options;\n    const data = await this.resend.get(\n      `/emails/${emailId}/attachments/${id}`\n    );\n    return data;\n  }\n  async list(options) {\n    const { emailId } = options;\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/emails/${emailId}/attachments?${queryString}` : `/emails/${emailId}/attachments`;\n    const data = await this.resend.get(url);\n    return data;\n  }\n};\n\n// src/emails/receiving/attachments/attachments.ts\nvar Attachments2 = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async get(options) {\n    const { emailId, id } = options;\n    const data = await this.resend.get(\n      `/emails/receiving/${emailId}/attachments/${id}`\n    );\n    return data;\n  }\n  async list(options) {\n    const { emailId } = options;\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/emails/receiving/${emailId}/attachments?${queryString}` : `/emails/receiving/${emailId}/attachments`;\n    const data = await this.resend.get(url);\n    return data;\n  }\n};\n\n// src/emails/receiving/receiving.ts\nvar Receiving = class {\n  constructor(resend) {\n    this.resend = resend;\n    this.attachments = new Attachments2(resend);\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/emails/receiving/${id}`\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/emails/receiving?${queryString}` : \"/emails/receiving\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n};\n\n// src/emails/emails.ts\nvar Emails = class {\n  constructor(resend) {\n    this.resend = resend;\n    this.attachments = new Attachments(resend);\n    this.receiving = new Receiving(resend);\n  }\n  async send(payload, options = {}) {\n    return this.create(payload, options);\n  }\n  async create(payload, options = {}) {\n    if (payload.react) {\n      payload.html = await render(payload.react);\n    }\n    const data = await this.resend.post(\n      \"/emails\",\n      parseEmailToApiOptions(payload),\n      options\n    );\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/emails/${id}`\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/emails?${queryString}` : \"/emails\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async update(payload) {\n    const data = await this.resend.patch(\n      `/emails/${payload.id}`,\n      {\n        scheduled_at: payload.scheduledAt\n      }\n    );\n    return data;\n  }\n  async cancel(id) {\n    const data = await this.resend.post(\n      `/emails/${id}/cancel`\n    );\n    return data;\n  }\n};\n\n// src/segments/segments.ts\nvar Segments = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      \"/segments\",\n      payload,\n      options\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/segments?${queryString}` : \"/segments\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/segments/${id}`\n    );\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/segments/${id}`\n    );\n    return data;\n  }\n};\n\n// src/common/utils/get-pagination-query-properties.ts\nfunction getPaginationQueryProperties(options = {}) {\n  const query = new URLSearchParams();\n  if (options.before) query.set(\"before\", options.before);\n  if (options.after) query.set(\"after\", options.after);\n  if (options.limit) query.set(\"limit\", options.limit.toString());\n  return query.size > 0 ? `?${query.toString()}` : \"\";\n}\n\n// src/common/utils/parse-template-to-api-options.ts\nfunction parseVariables(variables) {\n  return variables == null ? void 0 : variables.map((variable) => ({\n    key: variable.key,\n    type: variable.type,\n    fallback_value: variable.fallbackValue\n  }));\n}\nfunction parseTemplateToApiOptions(template) {\n  return {\n    name: \"name\" in template ? template.name : void 0,\n    subject: template.subject,\n    html: template.html,\n    text: template.text,\n    alias: template.alias,\n    from: template.from,\n    reply_to: template.replyTo,\n    variables: parseVariables(template.variables)\n  };\n}\n\n// src/templates/chainable-template-result.ts\nvar ChainableTemplateResult = class {\n  constructor(promise, publishFn) {\n    this.promise = promise;\n    this.publishFn = publishFn;\n  }\n  // If user calls `then` or only awaits for the result of create() or duplicate(), the behavior should be\n  // exactly as if they called create() or duplicate() directly. This will act as a normal promise\n  // biome-ignore lint/suspicious/noThenProperty: This class intentionally implements PromiseLike\n  then(onfulfilled, onrejected) {\n    return this.promise.then(onfulfilled, onrejected);\n  }\n  async publish() {\n    const { data, error } = await this.promise;\n    if (error) {\n      return {\n        data: null,\n        headers: null,\n        error\n      };\n    }\n    return this.publishFn(data.id);\n  }\n};\n\n// src/templates/templates.ts\nvar Templates = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  create(payload) {\n    const createPromise = this.performCreate(payload);\n    return new ChainableTemplateResult(createPromise, this.publish.bind(this));\n  }\n  // This creation process is being done separately from the public create so that\n  // the user can chain the publish operation after the create operation. Otherwise, due\n  // to the async nature of the renderAsync, the return type would be\n  // Promise<ChainableTemplateResult<CreateTemplateResponse>> which wouldn't be chainable.\n  async performCreate(payload) {\n    if (payload.react) {\n      if (!this.renderAsync) {\n        try {\n          const { renderAsync } = await __webpack_require__.e(/*! import() */ \"_3d4e\").then(__webpack_require__.t.bind(__webpack_require__, /*! @react-email/render */ \"?3d4e\", 19));\n          this.renderAsync = renderAsync;\n        } catch (e) {\n          throw new Error(\n            \"Failed to render React component. Make sure to install `@react-email/render`\"\n          );\n        }\n      }\n      payload.html = await this.renderAsync(\n        payload.react\n      );\n    }\n    return this.resend.post(\n      \"/templates\",\n      parseTemplateToApiOptions(payload)\n    );\n  }\n  async remove(identifier) {\n    const data = await this.resend.delete(\n      `/templates/${identifier}`\n    );\n    return data;\n  }\n  async get(identifier) {\n    const data = await this.resend.get(\n      `/templates/${identifier}`\n    );\n    return data;\n  }\n  async list(options = {}) {\n    return this.resend.get(\n      `/templates${getPaginationQueryProperties(options)}`\n    );\n  }\n  duplicate(identifier) {\n    const promiseDuplicate = this.resend.post(\n      `/templates/${identifier}/duplicate`\n    );\n    return new ChainableTemplateResult(\n      promiseDuplicate,\n      this.publish.bind(this)\n    );\n  }\n  async publish(identifier) {\n    const data = await this.resend.post(\n      `/templates/${identifier}/publish`\n    );\n    return data;\n  }\n  async update(identifier, payload) {\n    const data = await this.resend.patch(\n      `/templates/${identifier}`,\n      parseTemplateToApiOptions(payload)\n    );\n    return data;\n  }\n};\n\n// src/topics/topics.ts\nvar Topics = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload) {\n    const _a = payload, { defaultSubscription } = _a, body = __objRest(_a, [\"defaultSubscription\"]);\n    const data = await this.resend.post(\"/topics\", __spreadProps(__spreadValues({}, body), {\n      default_subscription: defaultSubscription\n    }));\n    return data;\n  }\n  async list() {\n    const data = await this.resend.get(\"/topics\");\n    return data;\n  }\n  async get(id) {\n    if (!id) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const data = await this.resend.get(\n      `/topics/${id}`\n    );\n    return data;\n  }\n  async update(payload) {\n    if (!payload.id) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const data = await this.resend.patch(\n      `/topics/${payload.id}`,\n      payload\n    );\n    return data;\n  }\n  async remove(id) {\n    if (!id) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const data = await this.resend.delete(\n      `/topics/${id}`\n    );\n    return data;\n  }\n};\n\n// src/webhooks/webhooks.ts\n\nvar Webhooks = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      \"/webhooks\",\n      payload,\n      options\n    );\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/webhooks/${id}`\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/webhooks?${queryString}` : \"/webhooks\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async update(id, payload) {\n    const data = await this.resend.patch(\n      `/webhooks/${id}`,\n      payload\n    );\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/webhooks/${id}`\n    );\n    return data;\n  }\n  verify(payload) {\n    const webhook = new svix__WEBPACK_IMPORTED_MODULE_0__.Webhook(payload.webhookSecret);\n    return webhook.verify(payload.payload, {\n      \"svix-id\": payload.headers.id,\n      \"svix-timestamp\": payload.headers.timestamp,\n      \"svix-signature\": payload.headers.signature\n    });\n  }\n};\n\n// src/resend.ts\nvar defaultBaseUrl = \"https://api.resend.com\";\nvar defaultUserAgent = `resend-node:${version}`;\nvar baseUrl = typeof process !== \"undefined\" && process.env ? process.env.RESEND_BASE_URL || defaultBaseUrl : defaultBaseUrl;\nvar userAgent = typeof process !== \"undefined\" && process.env ? process.env.RESEND_USER_AGENT || defaultUserAgent : defaultUserAgent;\nvar Resend = class {\n  constructor(key) {\n    this.key = key;\n    this.apiKeys = new ApiKeys(this);\n    this.segments = new Segments(this);\n    /**\n     * @deprecated Use segments instead\n     */\n    this.audiences = this.segments;\n    this.batch = new Batch(this);\n    this.broadcasts = new Broadcasts(this);\n    this.contacts = new Contacts(this);\n    this.contactProperties = new ContactProperties(this);\n    this.domains = new Domains(this);\n    this.emails = new Emails(this);\n    this.webhooks = new Webhooks(this);\n    this.templates = new Templates(this);\n    this.topics = new Topics(this);\n    if (!key) {\n      if (typeof process !== \"undefined\" && process.env) {\n        this.key = process.env.RESEND_API_KEY;\n      }\n      if (!this.key) {\n        throw new Error(\n          'Missing API key. Pass it to the constructor `new Resend(\"re_123\")`'\n        );\n      }\n    }\n    this.headers = new Headers({\n      Authorization: `Bearer ${this.key}`,\n      \"User-Agent\": userAgent,\n      \"Content-Type\": \"application/json\"\n    });\n  }\n  async fetchRequest(path, options = {}) {\n    try {\n      const response = await fetch(`${baseUrl}${path}`, options);\n      if (!response.ok) {\n        try {\n          const rawError = await response.text();\n          return {\n            data: null,\n            error: JSON.parse(rawError),\n            headers: Object.fromEntries(response.headers.entries())\n          };\n        } catch (err) {\n          if (err instanceof SyntaxError) {\n            return {\n              data: null,\n              error: {\n                name: \"application_error\",\n                statusCode: response.status,\n                message: \"Internal server error. We are unable to process your request right now, please try again later.\"\n              },\n              headers: Object.fromEntries(response.headers.entries())\n            };\n          }\n          const error = {\n            message: response.statusText,\n            statusCode: response.status,\n            name: \"application_error\"\n          };\n          if (err instanceof Error) {\n            return {\n              data: null,\n              error: __spreadProps(__spreadValues({}, error), { message: err.message }),\n              headers: Object.fromEntries(response.headers.entries())\n            };\n          }\n          return {\n            data: null,\n            error,\n            headers: Object.fromEntries(response.headers.entries())\n          };\n        }\n      }\n      const data = await response.json();\n      return {\n        data,\n        error: null,\n        headers: Object.fromEntries(response.headers.entries())\n      };\n    } catch (e) {\n      return {\n        data: null,\n        error: {\n          name: \"application_error\",\n          statusCode: null,\n          message: \"Unable to fetch data. The request could not be resolved.\"\n        },\n        headers: null\n      };\n    }\n  }\n  async post(path, entity, options = {}) {\n    const headers = new Headers(this.headers);\n    if (options.headers) {\n      for (const [key, value] of new Headers(options.headers).entries()) {\n        headers.set(key, value);\n      }\n    }\n    if (options.idempotencyKey) {\n      headers.set(\"Idempotency-Key\", options.idempotencyKey);\n    }\n    const requestOptions = __spreadProps(__spreadValues({\n      method: \"POST\",\n      body: JSON.stringify(entity)\n    }, options), {\n      headers\n    });\n    return this.fetchRequest(path, requestOptions);\n  }\n  async get(path, options = {}) {\n    const headers = new Headers(this.headers);\n    if (options.headers) {\n      for (const [key, value] of new Headers(options.headers).entries()) {\n        headers.set(key, value);\n      }\n    }\n    const requestOptions = __spreadProps(__spreadValues({\n      method: \"GET\"\n    }, options), {\n      headers\n    });\n    return this.fetchRequest(path, requestOptions);\n  }\n  async put(path, entity, options = {}) {\n    const headers = new Headers(this.headers);\n    if (options.headers) {\n      for (const [key, value] of new Headers(options.headers).entries()) {\n        headers.set(key, value);\n      }\n    }\n    const requestOptions = __spreadProps(__spreadValues({\n      method: \"PUT\",\n      body: JSON.stringify(entity)\n    }, options), {\n      headers\n    });\n    return this.fetchRequest(path, requestOptions);\n  }\n  async patch(path, entity, options = {}) {\n    const headers = new Headers(this.headers);\n    if (options.headers) {\n      for (const [key, value] of new Headers(options.headers).entries()) {\n        headers.set(key, value);\n      }\n    }\n    const requestOptions = __spreadProps(__spreadValues({\n      method: \"PATCH\",\n      body: JSON.stringify(entity)\n    }, options), {\n      headers\n    });\n    return this.fetchRequest(path, requestOptions);\n  }\n  async delete(path, query) {\n    const requestOptions = {\n      method: \"DELETE\",\n      body: JSON.stringify(query),\n      headers: this.headers\n    };\n    return this.fetchRequest(path, requestOptions);\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmVzZW5kL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLDJDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsR0FBRztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLGtCQUFrQixRQUFRLDRJQUE2QjtBQUM5RCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixHQUFHO0FBQ3hCLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSw2Q0FBNkMsWUFBWTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLEdBQUc7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixHQUFHO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsR0FBRztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLHFEQUFxRCxZQUFZO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsR0FBRztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsV0FBVztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLEdBQUc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsV0FBVyxZQUFZLFlBQVksaUJBQWlCLFdBQVc7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixXQUFXLFlBQVksa0JBQWtCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFdBQVcsWUFBWSxrQkFBa0I7QUFDNUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFdBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxXQUFXLFVBQVUsWUFBWSxpQkFBaUIsV0FBVztBQUN4RztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUJBQW1CO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsK0NBQStDLGFBQWE7QUFDNUQ7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGFBQWE7QUFDdkM7QUFDQSw0Q0FBNEMsV0FBVyxZQUFZLFlBQVksa0JBQWtCLFdBQVc7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxRQUFRO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsOEhBQThIO0FBQ25KO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUIsWUFBWSw4SEFBOEg7QUFDakw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsOEhBQThIO0FBQ25KO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1CQUFtQixZQUFZLDhIQUE4SDtBQUNqTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsUUFBUTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsOEhBQThIO0FBQ25KO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUIsWUFBWSw4SEFBOEg7QUFDakw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLDBDQUEwQyxZQUFZO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsR0FBRztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFdBQVc7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsR0FBRztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLEdBQUc7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0EsaUJBQWlCLFFBQVEsZUFBZSxHQUFHO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0EseUNBQXlDLFFBQVEsZUFBZSxZQUFZLGVBQWUsUUFBUTtBQUNuRztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUI7QUFDQSwyQkFBMkIsUUFBUSxlQUFlLEdBQUc7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFVBQVU7QUFDdEI7QUFDQSxtREFBbUQsUUFBUSxlQUFlLFlBQVkseUJBQXlCLFFBQVE7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixHQUFHO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLG1EQUFtRCxZQUFZO0FBQy9EO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLEdBQUc7QUFDcEI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EseUNBQXlDLFlBQVk7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixXQUFXO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsR0FBRztBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsMkNBQTJDLFlBQVk7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixHQUFHO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsR0FBRztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixpQkFBaUI7QUFDL0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsY0FBYyxRQUFRLDRJQUE2QjtBQUNyRTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsV0FBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxtQkFBbUIsc0NBQXNDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsV0FBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzQkFBc0I7QUFDaEQsa0ZBQWtGO0FBQ2xGO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLEdBQUc7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsV0FBVztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLEdBQUc7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLEdBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsMkNBQTJDLFlBQVk7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixHQUFHO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixHQUFHO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlDQUFPO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNDQUFzQyxRQUFRO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFNBQVM7QUFDeEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHVDQUF1QztBQUN2QztBQUNBLHNDQUFzQyxRQUFRLEVBQUUsS0FBSztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsWUFBWSxzQkFBc0I7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFIiwic291cmNlcyI6WyJDOlxcRGV2XFxiYW1hbGl0ZS1oci1uZXdcXG5vZGVfbW9kdWxlc1xccmVzZW5kXFxkaXN0XFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xudmFyIF9fc3ByZWFkUHJvcHMgPSAoYSwgYikgPT4gX19kZWZQcm9wcyhhLCBfX2dldE93blByb3BEZXNjcyhiKSk7XG52YXIgX19vYmpSZXN0ID0gKHNvdXJjZSwgZXhjbHVkZSkgPT4ge1xuICB2YXIgdGFyZ2V0ID0ge307XG4gIGZvciAodmFyIHByb3AgaW4gc291cmNlKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChzb3VyY2UsIHByb3ApICYmIGV4Y2x1ZGUuaW5kZXhPZihwcm9wKSA8IDApXG4gICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gIGlmIChzb3VyY2UgIT0gbnVsbCAmJiBfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhzb3VyY2UpKSB7XG4gICAgICBpZiAoZXhjbHVkZS5pbmRleE9mKHByb3ApIDwgMCAmJiBfX3Byb3BJc0VudW0uY2FsbChzb3VyY2UsIHByb3ApKVxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgfVxuICByZXR1cm4gdGFyZ2V0O1xufTtcblxuLy8gcGFja2FnZS5qc29uXG52YXIgdmVyc2lvbiA9IFwiNi40LjFcIjtcblxuLy8gc3JjL2NvbW1vbi91dGlscy9idWlsZC1wYWdpbmF0aW9uLXF1ZXJ5LnRzXG5mdW5jdGlvbiBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKSB7XG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgaWYgKG9wdGlvbnMubGltaXQgIT09IHZvaWQgMCkge1xuICAgIHNlYXJjaFBhcmFtcy5zZXQoXCJsaW1pdFwiLCBvcHRpb25zLmxpbWl0LnRvU3RyaW5nKCkpO1xuICB9XG4gIGlmIChcImFmdGVyXCIgaW4gb3B0aW9ucyAmJiBvcHRpb25zLmFmdGVyICE9PSB2b2lkIDApIHtcbiAgICBzZWFyY2hQYXJhbXMuc2V0KFwiYWZ0ZXJcIiwgb3B0aW9ucy5hZnRlcik7XG4gIH1cbiAgaWYgKFwiYmVmb3JlXCIgaW4gb3B0aW9ucyAmJiBvcHRpb25zLmJlZm9yZSAhPT0gdm9pZCAwKSB7XG4gICAgc2VhcmNoUGFyYW1zLnNldChcImJlZm9yZVwiLCBvcHRpb25zLmJlZm9yZSk7XG4gIH1cbiAgcmV0dXJuIHNlYXJjaFBhcmFtcy50b1N0cmluZygpO1xufVxuXG4vLyBzcmMvYXBpLWtleXMvYXBpLWtleXMudHNcbnZhciBBcGlLZXlzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBcIi9hcGkta2V5c1wiLFxuICAgICAgcGF5bG9hZCxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvYXBpLWtleXM/JHtxdWVyeVN0cmluZ31gIDogXCIvYXBpLWtleXNcIjtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlKGlkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShcbiAgICAgIGAvYXBpLWtleXMvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcblxuLy8gc3JjL2NvbW1vbi91dGlscy9wYXJzZS1lbWFpbC10by1hcGktb3B0aW9ucy50c1xuZnVuY3Rpb24gcGFyc2VBdHRhY2htZW50cyhhdHRhY2htZW50cykge1xuICByZXR1cm4gYXR0YWNobWVudHMgPT0gbnVsbCA/IHZvaWQgMCA6IGF0dGFjaG1lbnRzLm1hcCgoYXR0YWNobWVudCkgPT4gKHtcbiAgICBjb250ZW50OiBhdHRhY2htZW50LmNvbnRlbnQsXG4gICAgZmlsZW5hbWU6IGF0dGFjaG1lbnQuZmlsZW5hbWUsXG4gICAgcGF0aDogYXR0YWNobWVudC5wYXRoLFxuICAgIGNvbnRlbnRfdHlwZTogYXR0YWNobWVudC5jb250ZW50VHlwZSxcbiAgICBjb250ZW50X2lkOiBhdHRhY2htZW50LmNvbnRlbnRJZFxuICB9KSk7XG59XG5mdW5jdGlvbiBwYXJzZUVtYWlsVG9BcGlPcHRpb25zKGVtYWlsKSB7XG4gIHJldHVybiB7XG4gICAgYXR0YWNobWVudHM6IHBhcnNlQXR0YWNobWVudHMoZW1haWwuYXR0YWNobWVudHMpLFxuICAgIGJjYzogZW1haWwuYmNjLFxuICAgIGNjOiBlbWFpbC5jYyxcbiAgICBmcm9tOiBlbWFpbC5mcm9tLFxuICAgIGhlYWRlcnM6IGVtYWlsLmhlYWRlcnMsXG4gICAgaHRtbDogZW1haWwuaHRtbCxcbiAgICByZXBseV90bzogZW1haWwucmVwbHlUbyxcbiAgICBzY2hlZHVsZWRfYXQ6IGVtYWlsLnNjaGVkdWxlZEF0LFxuICAgIHN1YmplY3Q6IGVtYWlsLnN1YmplY3QsXG4gICAgdGFnczogZW1haWwudGFncyxcbiAgICB0ZXh0OiBlbWFpbC50ZXh0LFxuICAgIHRvOiBlbWFpbC50byxcbiAgICB0ZW1wbGF0ZTogZW1haWwudGVtcGxhdGUgPyB7XG4gICAgICBpZDogZW1haWwudGVtcGxhdGUuaWQsXG4gICAgICB2YXJpYWJsZXM6IGVtYWlsLnRlbXBsYXRlLnZhcmlhYmxlc1xuICAgIH0gOiB2b2lkIDAsXG4gICAgdG9waWNfaWQ6IGVtYWlsLnRvcGljSWRcbiAgfTtcbn1cblxuLy8gc3JjL3JlbmRlci50c1xuYXN5bmMgZnVuY3Rpb24gcmVuZGVyKG5vZGUpIHtcbiAgbGV0IHJlbmRlcjI7XG4gIHRyeSB7XG4gICAgKHsgcmVuZGVyOiByZW5kZXIyIH0gPSBhd2FpdCBpbXBvcnQoXCJAcmVhY3QtZW1haWwvcmVuZGVyXCIpKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiRmFpbGVkIHRvIHJlbmRlciBSZWFjdCBjb21wb25lbnQuIE1ha2Ugc3VyZSB0byBpbnN0YWxsIGBAcmVhY3QtZW1haWwvcmVuZGVyYCBvciBgQHJlYWN0LWVtYWlsL2NvbXBvbmVudHNgLlwiXG4gICAgKTtcbiAgfVxuICByZXR1cm4gcmVuZGVyMihub2RlKTtcbn1cblxuLy8gc3JjL2JhdGNoL2JhdGNoLnRzXG52YXIgQmF0Y2ggPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuICAgIHRoaXMucmVzZW5kID0gcmVzZW5kO1xuICB9XG4gIGFzeW5jIHNlbmQocGF5bG9hZCwgb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZShwYXlsb2FkLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucykge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBlbWFpbHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGVtYWlsIG9mIHBheWxvYWQpIHtcbiAgICAgIGlmIChlbWFpbC5yZWFjdCkge1xuICAgICAgICBlbWFpbC5odG1sID0gYXdhaXQgcmVuZGVyKGVtYWlsLnJlYWN0KTtcbiAgICAgICAgZW1haWwucmVhY3QgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgICBlbWFpbHMucHVzaChwYXJzZUVtYWlsVG9BcGlPcHRpb25zKGVtYWlsKSk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgXCIvZW1haWxzL2JhdGNoXCIsXG4gICAgICBlbWFpbHMsXG4gICAgICBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBvcHRpb25zKSwge1xuICAgICAgICBoZWFkZXJzOiBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICAgICAgXCJ4LWJhdGNoLXZhbGlkYXRpb25cIjogKF9hID0gb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5iYXRjaFZhbGlkYXRpb24pICE9IG51bGwgPyBfYSA6IFwic3RyaWN0XCJcbiAgICAgICAgfSwgb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5oZWFkZXJzKVxuICAgICAgfSlcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59O1xuXG4vLyBzcmMvYnJvYWRjYXN0cy9icm9hZGNhc3RzLnRzXG52YXIgQnJvYWRjYXN0cyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChwYXlsb2FkLnJlYWN0KSB7XG4gICAgICBwYXlsb2FkLmh0bWwgPSBhd2FpdCByZW5kZXIocGF5bG9hZC5yZWFjdCk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgXCIvYnJvYWRjYXN0c1wiLFxuICAgICAge1xuICAgICAgICBuYW1lOiBwYXlsb2FkLm5hbWUsXG4gICAgICAgIHNlZ21lbnRfaWQ6IHBheWxvYWQuc2VnbWVudElkLFxuICAgICAgICBhdWRpZW5jZV9pZDogcGF5bG9hZC5hdWRpZW5jZUlkLFxuICAgICAgICBwcmV2aWV3X3RleHQ6IHBheWxvYWQucHJldmlld1RleHQsXG4gICAgICAgIGZyb206IHBheWxvYWQuZnJvbSxcbiAgICAgICAgaHRtbDogcGF5bG9hZC5odG1sLFxuICAgICAgICByZXBseV90bzogcGF5bG9hZC5yZXBseVRvLFxuICAgICAgICBzdWJqZWN0OiBwYXlsb2FkLnN1YmplY3QsXG4gICAgICAgIHRleHQ6IHBheWxvYWQudGV4dCxcbiAgICAgICAgdG9waWNfaWQ6IHBheWxvYWQudG9waWNJZFxuICAgICAgfSxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHNlbmQoaWQsIHBheWxvYWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIGAvYnJvYWRjYXN0cy8ke2lkfS9zZW5kYCxcbiAgICAgIHsgc2NoZWR1bGVkX2F0OiBwYXlsb2FkID09IG51bGwgPyB2b2lkIDAgOiBwYXlsb2FkLnNjaGVkdWxlZEF0IH1cbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvYnJvYWRjYXN0cz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi9icm9hZGNhc3RzXCI7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGdldChpZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoXG4gICAgICBgL2Jyb2FkY2FzdHMvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyByZW1vdmUoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKFxuICAgICAgYC9icm9hZGNhc3RzLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgdXBkYXRlKGlkLCBwYXlsb2FkKSB7XG4gICAgaWYgKHBheWxvYWQucmVhY3QpIHtcbiAgICAgIHBheWxvYWQuaHRtbCA9IGF3YWl0IHJlbmRlcihwYXlsb2FkLnJlYWN0KTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKFxuICAgICAgYC9icm9hZGNhc3RzLyR7aWR9YCxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogcGF5bG9hZC5uYW1lLFxuICAgICAgICBzZWdtZW50X2lkOiBwYXlsb2FkLnNlZ21lbnRJZCxcbiAgICAgICAgYXVkaWVuY2VfaWQ6IHBheWxvYWQuYXVkaWVuY2VJZCxcbiAgICAgICAgZnJvbTogcGF5bG9hZC5mcm9tLFxuICAgICAgICBodG1sOiBwYXlsb2FkLmh0bWwsXG4gICAgICAgIHRleHQ6IHBheWxvYWQudGV4dCxcbiAgICAgICAgc3ViamVjdDogcGF5bG9hZC5zdWJqZWN0LFxuICAgICAgICByZXBseV90bzogcGF5bG9hZC5yZXBseVRvLFxuICAgICAgICBwcmV2aWV3X3RleHQ6IHBheWxvYWQucHJldmlld1RleHQsXG4gICAgICAgIHRvcGljX2lkOiBwYXlsb2FkLnRvcGljSWRcbiAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59O1xuXG4vLyBzcmMvY29tbW9uL3V0aWxzL3BhcnNlLWNvbnRhY3QtcHJvcGVydGllcy10by1hcGktb3B0aW9ucy50c1xuZnVuY3Rpb24gcGFyc2VDb250YWN0UHJvcGVydHlGcm9tQXBpKGNvbnRhY3RQcm9wZXJ0eSkge1xuICByZXR1cm4ge1xuICAgIGlkOiBjb250YWN0UHJvcGVydHkuaWQsXG4gICAga2V5OiBjb250YWN0UHJvcGVydHkua2V5LFxuICAgIGNyZWF0ZWRBdDogY29udGFjdFByb3BlcnR5LmNyZWF0ZWRfYXQsXG4gICAgdHlwZTogY29udGFjdFByb3BlcnR5LnR5cGUsXG4gICAgZmFsbGJhY2tWYWx1ZTogY29udGFjdFByb3BlcnR5LmZhbGxiYWNrX3ZhbHVlXG4gIH07XG59XG5mdW5jdGlvbiBwYXJzZUNvbnRhY3RQcm9wZXJ0eVRvQXBpT3B0aW9ucyhjb250YWN0UHJvcGVydHkpIHtcbiAgaWYgKFwia2V5XCIgaW4gY29udGFjdFByb3BlcnR5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtleTogY29udGFjdFByb3BlcnR5LmtleSxcbiAgICAgIHR5cGU6IGNvbnRhY3RQcm9wZXJ0eS50eXBlLFxuICAgICAgZmFsbGJhY2tfdmFsdWU6IGNvbnRhY3RQcm9wZXJ0eS5mYWxsYmFja1ZhbHVlXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGZhbGxiYWNrX3ZhbHVlOiBjb250YWN0UHJvcGVydHkuZmFsbGJhY2tWYWx1ZVxuICB9O1xufVxuXG4vLyBzcmMvY29udGFjdC1wcm9wZXJ0aWVzL2NvbnRhY3QtcHJvcGVydGllcy50c1xudmFyIENvbnRhY3RQcm9wZXJ0aWVzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyBjcmVhdGUob3B0aW9ucykge1xuICAgIGNvbnN0IGFwaU9wdGlvbnMgPSBwYXJzZUNvbnRhY3RQcm9wZXJ0eVRvQXBpT3B0aW9ucyhvcHRpb25zKTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIFwiL2NvbnRhY3QtcHJvcGVydGllc1wiLFxuICAgICAgYXBpT3B0aW9uc1xuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgbGlzdChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuICAgIGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9jb250YWN0LXByb3BlcnRpZXM/JHtxdWVyeVN0cmluZ31gIDogXCIvY29udGFjdC1wcm9wZXJ0aWVzXCI7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcbiAgICBpZiAocmVzcG9uc2UuZGF0YSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcmVzcG9uc2UuZGF0YSksIHtcbiAgICAgICAgICBkYXRhOiByZXNwb25zZS5kYXRhLmRhdGEubWFwKFxuICAgICAgICAgICAgKGFwaUNvbnRhY3RQcm9wZXJ0eSkgPT4gcGFyc2VDb250YWN0UHJvcGVydHlGcm9tQXBpKGFwaUNvbnRhY3RQcm9wZXJ0eSlcbiAgICAgICAgICApXG4gICAgICAgIH0pLFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG4gIGFzeW5jIGdldChpZCkge1xuICAgIGlmICghaWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGhlYWRlcnM6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgZmllbGQuXCIsXG4gICAgICAgICAgc3RhdHVzQ29kZTogbnVsbCxcbiAgICAgICAgICBuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldChcbiAgICAgIGAvY29udGFjdC1wcm9wZXJ0aWVzLyR7aWR9YFxuICAgICk7XG4gICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgICAgICBvYmplY3Q6IFwiY29udGFjdF9wcm9wZXJ0eVwiXG4gICAgICAgIH0sIHBhcnNlQ29udGFjdFByb3BlcnR5RnJvbUFwaShyZXNwb25zZS5kYXRhKSksXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICAgIGVycm9yOiBudWxsXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cbiAgYXN5bmMgdXBkYXRlKHBheWxvYWQpIHtcbiAgICBpZiAoIXBheWxvYWQuaWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGhlYWRlcnM6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgZmllbGQuXCIsXG4gICAgICAgICAgc3RhdHVzQ29kZTogbnVsbCxcbiAgICAgICAgICBuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBhcGlPcHRpb25zID0gcGFyc2VDb250YWN0UHJvcGVydHlUb0FwaU9wdGlvbnMocGF5bG9hZCk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKFxuICAgICAgYC9jb250YWN0LXByb3BlcnRpZXMvJHtwYXlsb2FkLmlkfWAsXG4gICAgICBhcGlPcHRpb25zXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyByZW1vdmUoaWQpIHtcbiAgICBpZiAoIWlkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIGZpZWxkLlwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShcbiAgICAgIGAvY29udGFjdC1wcm9wZXJ0aWVzLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbn07XG5cbi8vIHNyYy9jb250YWN0cy9zZWdtZW50cy9jb250YWN0LXNlZ21lbnRzLnRzXG52YXIgQ29udGFjdFNlZ21lbnRzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMuY29udGFjdElkICYmICFvcHRpb25zLmVtYWlsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG4gICAgICAgICAgc3RhdHVzQ29kZTogbnVsbCxcbiAgICAgICAgICBuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBpZGVudGlmaWVyID0gb3B0aW9ucy5lbWFpbCA/IG9wdGlvbnMuZW1haWwgOiBvcHRpb25zLmNvbnRhY3RJZDtcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuICAgIGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9jb250YWN0cy8ke2lkZW50aWZpZXJ9L3NlZ21lbnRzPyR7cXVlcnlTdHJpbmd9YCA6IGAvY29udGFjdHMvJHtpZGVudGlmaWVyfS9zZWdtZW50c2A7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGFkZChvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLmNvbnRhY3RJZCAmJiAhb3B0aW9ucy5lbWFpbCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgaGVhZGVyczogbnVsbCxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBvciBgZW1haWxgIGZpZWxkLlwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgaWRlbnRpZmllciA9IG9wdGlvbnMuZW1haWwgPyBvcHRpb25zLmVtYWlsIDogb3B0aW9ucy5jb250YWN0SWQ7XG4gICAgcmV0dXJuIHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBgL2NvbnRhY3RzLyR7aWRlbnRpZmllcn0vc2VnbWVudHMvJHtvcHRpb25zLnNlZ21lbnRJZH1gXG4gICAgKTtcbiAgfVxuICBhc3luYyByZW1vdmUob3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucy5jb250YWN0SWQgJiYgIW9wdGlvbnMuZW1haWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGhlYWRlcnM6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgb3IgYGVtYWlsYCBmaWVsZC5cIixcbiAgICAgICAgICBzdGF0dXNDb2RlOiBudWxsLFxuICAgICAgICAgIG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGlkZW50aWZpZXIgPSBvcHRpb25zLmVtYWlsID8gb3B0aW9ucy5lbWFpbCA6IG9wdGlvbnMuY29udGFjdElkO1xuICAgIHJldHVybiB0aGlzLnJlc2VuZC5kZWxldGUoXG4gICAgICBgL2NvbnRhY3RzLyR7aWRlbnRpZmllcn0vc2VnbWVudHMvJHtvcHRpb25zLnNlZ21lbnRJZH1gXG4gICAgKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvbnRhY3RzL3RvcGljcy9jb250YWN0LXRvcGljcy50c1xudmFyIENvbnRhY3RUb3BpY3MgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuICAgIHRoaXMucmVzZW5kID0gcmVzZW5kO1xuICB9XG4gIGFzeW5jIHVwZGF0ZShwYXlsb2FkKSB7XG4gICAgaWYgKCFwYXlsb2FkLmlkICYmICFwYXlsb2FkLmVtYWlsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG4gICAgICAgICAgc3RhdHVzQ29kZTogbnVsbCxcbiAgICAgICAgICBuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBpZGVudGlmaWVyID0gcGF5bG9hZC5lbWFpbCA/IHBheWxvYWQuZW1haWwgOiBwYXlsb2FkLmlkO1xuICAgIHJldHVybiB0aGlzLnJlc2VuZC5wYXRjaChcbiAgICAgIGAvY29udGFjdHMvJHtpZGVudGlmaWVyfS90b3BpY3NgLFxuICAgICAgcGF5bG9hZC50b3BpY3NcbiAgICApO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucy5pZCAmJiAhb3B0aW9ucy5lbWFpbCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgaGVhZGVyczogbnVsbCxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBvciBgZW1haWxgIGZpZWxkLlwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgaWRlbnRpZmllciA9IG9wdGlvbnMuZW1haWwgPyBvcHRpb25zLmVtYWlsIDogb3B0aW9ucy5pZDtcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuICAgIGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9jb250YWN0cy8ke2lkZW50aWZpZXJ9L3RvcGljcz8ke3F1ZXJ5U3RyaW5nfWAgOiBgL2NvbnRhY3RzLyR7aWRlbnRpZmllcn0vdG9waWNzYDtcbiAgICByZXR1cm4gdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb250YWN0cy9jb250YWN0cy50c1xudmFyIENvbnRhY3RzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgICB0aGlzLnRvcGljcyA9IG5ldyBDb250YWN0VG9waWNzKHRoaXMucmVzZW5kKTtcbiAgICB0aGlzLnNlZ21lbnRzID0gbmV3IENvbnRhY3RTZWdtZW50cyh0aGlzLnJlc2VuZCk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICghcGF5bG9hZC5hdWRpZW5jZUlkKSB7XG4gICAgICBjb25zdCBkYXRhMiA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICAgIFwiL2NvbnRhY3RzXCIsXG4gICAgICAgIHtcbiAgICAgICAgICB1bnN1YnNjcmliZWQ6IHBheWxvYWQudW5zdWJzY3JpYmVkLFxuICAgICAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsLFxuICAgICAgICAgIGZpcnN0X25hbWU6IHBheWxvYWQuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3RfbmFtZTogcGF5bG9hZC5sYXN0TmFtZSxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiBwYXlsb2FkLnByb3BlcnRpZXNcbiAgICAgICAgfSxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgKTtcbiAgICAgIHJldHVybiBkYXRhMjtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBgL2F1ZGllbmNlcy8ke3BheWxvYWQuYXVkaWVuY2VJZH0vY29udGFjdHNgLFxuICAgICAge1xuICAgICAgICB1bnN1YnNjcmliZWQ6IHBheWxvYWQudW5zdWJzY3JpYmVkLFxuICAgICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCxcbiAgICAgICAgZmlyc3RfbmFtZTogcGF5bG9hZC5maXJzdE5hbWUsXG4gICAgICAgIGxhc3RfbmFtZTogcGF5bG9hZC5sYXN0TmFtZSxcbiAgICAgICAgcHJvcGVydGllczogcGF5bG9hZC5wcm9wZXJ0aWVzXG4gICAgICB9LFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgbGlzdChvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIShcImF1ZGllbmNlSWRcIiBpbiBvcHRpb25zKSB8fCBvcHRpb25zLmF1ZGllbmNlSWQgPT09IHZvaWQgMCkge1xuICAgICAgY29uc3QgcXVlcnlTdHJpbmcyID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG4gICAgICBjb25zdCB1cmwyID0gcXVlcnlTdHJpbmcyID8gYC9jb250YWN0cz8ke3F1ZXJ5U3RyaW5nMn1gIDogXCIvY29udGFjdHNcIjtcbiAgICAgIGNvbnN0IGRhdGEyID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybDIpO1xuICAgICAgcmV0dXJuIGRhdGEyO1xuICAgIH1cbiAgICBjb25zdCBfYSA9IG9wdGlvbnMsIHsgYXVkaWVuY2VJZCB9ID0gX2EsIHBhZ2luYXRpb25PcHRpb25zID0gX19vYmpSZXN0KF9hLCBbXCJhdWRpZW5jZUlkXCJdKTtcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KHBhZ2luYXRpb25PcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvYXVkaWVuY2VzLyR7YXVkaWVuY2VJZH0vY29udGFjdHM/JHtxdWVyeVN0cmluZ31gIDogYC9hdWRpZW5jZXMvJHthdWRpZW5jZUlkfS9jb250YWN0c2A7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGdldChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXNlbmQuZ2V0KGAvY29udGFjdHMvJHtvcHRpb25zfWApO1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMuaWQgJiYgIW9wdGlvbnMuZW1haWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGhlYWRlcnM6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgb3IgYGVtYWlsYCBmaWVsZC5cIixcbiAgICAgICAgICBzdGF0dXNDb2RlOiBudWxsLFxuICAgICAgICAgIG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5hdWRpZW5jZUlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXNlbmQuZ2V0KFxuICAgICAgICBgL2NvbnRhY3RzLyR7KG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZW1haWwpID8gb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5lbWFpbCA6IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuaWR9YFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVzZW5kLmdldChcbiAgICAgIGAvYXVkaWVuY2VzLyR7b3B0aW9ucy5hdWRpZW5jZUlkfS9jb250YWN0cy8keyhvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmVtYWlsKSA/IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZW1haWwgOiBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmlkfWBcbiAgICApO1xuICB9XG4gIGFzeW5jIHVwZGF0ZShvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLmlkICYmICFvcHRpb25zLmVtYWlsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG4gICAgICAgICAgc3RhdHVzQ29kZTogbnVsbCxcbiAgICAgICAgICBuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMuYXVkaWVuY2VJZCkge1xuICAgICAgY29uc3QgZGF0YTIgPSBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChcbiAgICAgICAgYC9jb250YWN0cy8keyhvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmVtYWlsKSA/IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZW1haWwgOiBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmlkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICB1bnN1YnNjcmliZWQ6IG9wdGlvbnMudW5zdWJzY3JpYmVkLFxuICAgICAgICAgIGZpcnN0X25hbWU6IG9wdGlvbnMuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3RfbmFtZTogb3B0aW9ucy5sYXN0TmFtZSxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiBvcHRpb25zLnByb3BlcnRpZXNcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHJldHVybiBkYXRhMjtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKFxuICAgICAgYC9hdWRpZW5jZXMvJHtvcHRpb25zLmF1ZGllbmNlSWR9L2NvbnRhY3RzLyR7KG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZW1haWwpID8gb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5lbWFpbCA6IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuaWR9YCxcbiAgICAgIHtcbiAgICAgICAgdW5zdWJzY3JpYmVkOiBvcHRpb25zLnVuc3Vic2NyaWJlZCxcbiAgICAgICAgZmlyc3RfbmFtZTogb3B0aW9ucy5maXJzdE5hbWUsXG4gICAgICAgIGxhc3RfbmFtZTogb3B0aW9ucy5sYXN0TmFtZSxcbiAgICAgICAgcHJvcGVydGllczogb3B0aW9ucy5wcm9wZXJ0aWVzXG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyByZW1vdmUocGF5bG9hZCkge1xuICAgIGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIHRoaXMucmVzZW5kLmRlbGV0ZShcbiAgICAgICAgYC9jb250YWN0cy8ke3BheWxvYWR9YFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCFwYXlsb2FkLmlkICYmICFwYXlsb2FkLmVtYWlsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG4gICAgICAgICAgc3RhdHVzQ29kZTogbnVsbCxcbiAgICAgICAgICBuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoIXBheWxvYWQuYXVkaWVuY2VJZCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzZW5kLmRlbGV0ZShcbiAgICAgICAgYC9jb250YWN0cy8keyhwYXlsb2FkID09IG51bGwgPyB2b2lkIDAgOiBwYXlsb2FkLmVtYWlsKSA/IHBheWxvYWQgPT0gbnVsbCA/IHZvaWQgMCA6IHBheWxvYWQuZW1haWwgOiBwYXlsb2FkID09IG51bGwgPyB2b2lkIDAgOiBwYXlsb2FkLmlkfWBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlc2VuZC5kZWxldGUoXG4gICAgICBgL2F1ZGllbmNlcy8ke3BheWxvYWQuYXVkaWVuY2VJZH0vY29udGFjdHMvJHsocGF5bG9hZCA9PSBudWxsID8gdm9pZCAwIDogcGF5bG9hZC5lbWFpbCkgPyBwYXlsb2FkID09IG51bGwgPyB2b2lkIDAgOiBwYXlsb2FkLmVtYWlsIDogcGF5bG9hZCA9PSBudWxsID8gdm9pZCAwIDogcGF5bG9hZC5pZH1gXG4gICAgKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvbW1vbi91dGlscy9wYXJzZS1kb21haW4tdG8tYXBpLW9wdGlvbnMudHNcbmZ1bmN0aW9uIHBhcnNlRG9tYWluVG9BcGlPcHRpb25zKGRvbWFpbikge1xuICByZXR1cm4ge1xuICAgIG5hbWU6IGRvbWFpbi5uYW1lLFxuICAgIHJlZ2lvbjogZG9tYWluLnJlZ2lvbixcbiAgICBjdXN0b21fcmV0dXJuX3BhdGg6IGRvbWFpbi5jdXN0b21SZXR1cm5QYXRoXG4gIH07XG59XG5cbi8vIHNyYy9kb21haW5zL2RvbWFpbnMudHNcbnZhciBEb21haW5zID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBcIi9kb21haW5zXCIsXG4gICAgICBwYXJzZURvbWFpblRvQXBpT3B0aW9ucyhwYXlsb2FkKSxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvZG9tYWlucz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi9kb21haW5zXCI7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGdldChpZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoXG4gICAgICBgL2RvbWFpbnMvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyB1cGRhdGUocGF5bG9hZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChcbiAgICAgIGAvZG9tYWlucy8ke3BheWxvYWQuaWR9YCxcbiAgICAgIHtcbiAgICAgICAgY2xpY2tfdHJhY2tpbmc6IHBheWxvYWQuY2xpY2tUcmFja2luZyxcbiAgICAgICAgb3Blbl90cmFja2luZzogcGF5bG9hZC5vcGVuVHJhY2tpbmcsXG4gICAgICAgIHRsczogcGF5bG9hZC50bHNcbiAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHJlbW92ZShpZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5kZWxldGUoXG4gICAgICBgL2RvbWFpbnMvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyB2ZXJpZnkoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIGAvZG9tYWlucy8ke2lkfS92ZXJpZnlgXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcblxuLy8gc3JjL2VtYWlscy9hdHRhY2htZW50cy9hdHRhY2htZW50cy50c1xudmFyIEF0dGFjaG1lbnRzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyBnZXQob3B0aW9ucykge1xuICAgIGNvbnN0IHsgZW1haWxJZCwgaWQgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldChcbiAgICAgIGAvZW1haWxzLyR7ZW1haWxJZH0vYXR0YWNobWVudHMvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGVtYWlsSWQgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvZW1haWxzLyR7ZW1haWxJZH0vYXR0YWNobWVudHM/JHtxdWVyeVN0cmluZ31gIDogYC9lbWFpbHMvJHtlbWFpbElkfS9hdHRhY2htZW50c2A7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59O1xuXG4vLyBzcmMvZW1haWxzL3JlY2VpdmluZy9hdHRhY2htZW50cy9hdHRhY2htZW50cy50c1xudmFyIEF0dGFjaG1lbnRzMiA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gIH1cbiAgYXN5bmMgZ2V0KG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGVtYWlsSWQsIGlkIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoXG4gICAgICBgL2VtYWlscy9yZWNlaXZpbmcvJHtlbWFpbElkfS9hdHRhY2htZW50cy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucykge1xuICAgIGNvbnN0IHsgZW1haWxJZCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuICAgIGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9lbWFpbHMvcmVjZWl2aW5nLyR7ZW1haWxJZH0vYXR0YWNobWVudHM/JHtxdWVyeVN0cmluZ31gIDogYC9lbWFpbHMvcmVjZWl2aW5nLyR7ZW1haWxJZH0vYXR0YWNobWVudHNgO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcblxuLy8gc3JjL2VtYWlscy9yZWNlaXZpbmcvcmVjZWl2aW5nLnRzXG52YXIgUmVjZWl2aW5nID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgICB0aGlzLmF0dGFjaG1lbnRzID0gbmV3IEF0dGFjaG1lbnRzMihyZXNlbmQpO1xuICB9XG4gIGFzeW5jIGdldChpZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoXG4gICAgICBgL2VtYWlscy9yZWNlaXZpbmcvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG4gICAgY29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2VtYWlscy9yZWNlaXZpbmc/JHtxdWVyeVN0cmluZ31gIDogXCIvZW1haWxzL3JlY2VpdmluZ1wiO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcblxuLy8gc3JjL2VtYWlscy9lbWFpbHMudHNcbnZhciBFbWFpbHMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuICAgIHRoaXMucmVzZW5kID0gcmVzZW5kO1xuICAgIHRoaXMuYXR0YWNobWVudHMgPSBuZXcgQXR0YWNobWVudHMocmVzZW5kKTtcbiAgICB0aGlzLnJlY2VpdmluZyA9IG5ldyBSZWNlaXZpbmcocmVzZW5kKTtcbiAgfVxuICBhc3luYyBzZW5kKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZShwYXlsb2FkLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKHBheWxvYWQucmVhY3QpIHtcbiAgICAgIHBheWxvYWQuaHRtbCA9IGF3YWl0IHJlbmRlcihwYXlsb2FkLnJlYWN0KTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBcIi9lbWFpbHNcIixcbiAgICAgIHBhcnNlRW1haWxUb0FwaU9wdGlvbnMocGF5bG9hZCksXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBnZXQoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KFxuICAgICAgYC9lbWFpbHMvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG4gICAgY29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2VtYWlscz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi9lbWFpbHNcIjtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgdXBkYXRlKHBheWxvYWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucGF0Y2goXG4gICAgICBgL2VtYWlscy8ke3BheWxvYWQuaWR9YCxcbiAgICAgIHtcbiAgICAgICAgc2NoZWR1bGVkX2F0OiBwYXlsb2FkLnNjaGVkdWxlZEF0XG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBjYW5jZWwoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIGAvZW1haWxzLyR7aWR9L2NhbmNlbGBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59O1xuXG4vLyBzcmMvc2VnbWVudHMvc2VnbWVudHMudHNcbnZhciBTZWdtZW50cyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgXCIvc2VnbWVudHNcIixcbiAgICAgIHBheWxvYWQsXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG4gICAgY29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL3NlZ21lbnRzPyR7cXVlcnlTdHJpbmd9YCA6IFwiL3NlZ21lbnRzXCI7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGdldChpZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoXG4gICAgICBgL3NlZ21lbnRzLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlKGlkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShcbiAgICAgIGAvc2VnbWVudHMvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcblxuLy8gc3JjL2NvbW1vbi91dGlscy9nZXQtcGFnaW5hdGlvbi1xdWVyeS1wcm9wZXJ0aWVzLnRzXG5mdW5jdGlvbiBnZXRQYWdpbmF0aW9uUXVlcnlQcm9wZXJ0aWVzKG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBxdWVyeSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgaWYgKG9wdGlvbnMuYmVmb3JlKSBxdWVyeS5zZXQoXCJiZWZvcmVcIiwgb3B0aW9ucy5iZWZvcmUpO1xuICBpZiAob3B0aW9ucy5hZnRlcikgcXVlcnkuc2V0KFwiYWZ0ZXJcIiwgb3B0aW9ucy5hZnRlcik7XG4gIGlmIChvcHRpb25zLmxpbWl0KSBxdWVyeS5zZXQoXCJsaW1pdFwiLCBvcHRpb25zLmxpbWl0LnRvU3RyaW5nKCkpO1xuICByZXR1cm4gcXVlcnkuc2l6ZSA+IDAgPyBgPyR7cXVlcnkudG9TdHJpbmcoKX1gIDogXCJcIjtcbn1cblxuLy8gc3JjL2NvbW1vbi91dGlscy9wYXJzZS10ZW1wbGF0ZS10by1hcGktb3B0aW9ucy50c1xuZnVuY3Rpb24gcGFyc2VWYXJpYWJsZXModmFyaWFibGVzKSB7XG4gIHJldHVybiB2YXJpYWJsZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHZhcmlhYmxlcy5tYXAoKHZhcmlhYmxlKSA9PiAoe1xuICAgIGtleTogdmFyaWFibGUua2V5LFxuICAgIHR5cGU6IHZhcmlhYmxlLnR5cGUsXG4gICAgZmFsbGJhY2tfdmFsdWU6IHZhcmlhYmxlLmZhbGxiYWNrVmFsdWVcbiAgfSkpO1xufVxuZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZVRvQXBpT3B0aW9ucyh0ZW1wbGF0ZSkge1xuICByZXR1cm4ge1xuICAgIG5hbWU6IFwibmFtZVwiIGluIHRlbXBsYXRlID8gdGVtcGxhdGUubmFtZSA6IHZvaWQgMCxcbiAgICBzdWJqZWN0OiB0ZW1wbGF0ZS5zdWJqZWN0LFxuICAgIGh0bWw6IHRlbXBsYXRlLmh0bWwsXG4gICAgdGV4dDogdGVtcGxhdGUudGV4dCxcbiAgICBhbGlhczogdGVtcGxhdGUuYWxpYXMsXG4gICAgZnJvbTogdGVtcGxhdGUuZnJvbSxcbiAgICByZXBseV90bzogdGVtcGxhdGUucmVwbHlUbyxcbiAgICB2YXJpYWJsZXM6IHBhcnNlVmFyaWFibGVzKHRlbXBsYXRlLnZhcmlhYmxlcylcbiAgfTtcbn1cblxuLy8gc3JjL3RlbXBsYXRlcy9jaGFpbmFibGUtdGVtcGxhdGUtcmVzdWx0LnRzXG52YXIgQ2hhaW5hYmxlVGVtcGxhdGVSZXN1bHQgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHByb21pc2UsIHB1Ymxpc2hGbikge1xuICAgIHRoaXMucHJvbWlzZSA9IHByb21pc2U7XG4gICAgdGhpcy5wdWJsaXNoRm4gPSBwdWJsaXNoRm47XG4gIH1cbiAgLy8gSWYgdXNlciBjYWxscyBgdGhlbmAgb3Igb25seSBhd2FpdHMgZm9yIHRoZSByZXN1bHQgb2YgY3JlYXRlKCkgb3IgZHVwbGljYXRlKCksIHRoZSBiZWhhdmlvciBzaG91bGQgYmVcbiAgLy8gZXhhY3RseSBhcyBpZiB0aGV5IGNhbGxlZCBjcmVhdGUoKSBvciBkdXBsaWNhdGUoKSBkaXJlY3RseS4gVGhpcyB3aWxsIGFjdCBhcyBhIG5vcm1hbCBwcm9taXNlXG4gIC8vIGJpb21lLWlnbm9yZSBsaW50L3N1c3BpY2lvdXMvbm9UaGVuUHJvcGVydHk6IFRoaXMgY2xhc3MgaW50ZW50aW9uYWxseSBpbXBsZW1lbnRzIFByb21pc2VMaWtlXG4gIHRoZW4ob25mdWxmaWxsZWQsIG9ucmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9taXNlLnRoZW4ob25mdWxmaWxsZWQsIG9ucmVqZWN0ZWQpO1xuICB9XG4gIGFzeW5jIHB1Ymxpc2goKSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5wcm9taXNlO1xuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgaGVhZGVyczogbnVsbCxcbiAgICAgICAgZXJyb3JcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnB1Ymxpc2hGbihkYXRhLmlkKTtcbiAgfVxufTtcblxuLy8gc3JjL3RlbXBsYXRlcy90ZW1wbGF0ZXMudHNcbnZhciBUZW1wbGF0ZXMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuICAgIHRoaXMucmVzZW5kID0gcmVzZW5kO1xuICB9XG4gIGNyZWF0ZShwYXlsb2FkKSB7XG4gICAgY29uc3QgY3JlYXRlUHJvbWlzZSA9IHRoaXMucGVyZm9ybUNyZWF0ZShwYXlsb2FkKTtcbiAgICByZXR1cm4gbmV3IENoYWluYWJsZVRlbXBsYXRlUmVzdWx0KGNyZWF0ZVByb21pc2UsIHRoaXMucHVibGlzaC5iaW5kKHRoaXMpKTtcbiAgfVxuICAvLyBUaGlzIGNyZWF0aW9uIHByb2Nlc3MgaXMgYmVpbmcgZG9uZSBzZXBhcmF0ZWx5IGZyb20gdGhlIHB1YmxpYyBjcmVhdGUgc28gdGhhdFxuICAvLyB0aGUgdXNlciBjYW4gY2hhaW4gdGhlIHB1Ymxpc2ggb3BlcmF0aW9uIGFmdGVyIHRoZSBjcmVhdGUgb3BlcmF0aW9uLiBPdGhlcndpc2UsIGR1ZVxuICAvLyB0byB0aGUgYXN5bmMgbmF0dXJlIG9mIHRoZSByZW5kZXJBc3luYywgdGhlIHJldHVybiB0eXBlIHdvdWxkIGJlXG4gIC8vIFByb21pc2U8Q2hhaW5hYmxlVGVtcGxhdGVSZXN1bHQ8Q3JlYXRlVGVtcGxhdGVSZXNwb25zZT4+IHdoaWNoIHdvdWxkbid0IGJlIGNoYWluYWJsZS5cbiAgYXN5bmMgcGVyZm9ybUNyZWF0ZShwYXlsb2FkKSB7XG4gICAgaWYgKHBheWxvYWQucmVhY3QpIHtcbiAgICAgIGlmICghdGhpcy5yZW5kZXJBc3luYykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHsgcmVuZGVyQXN5bmMgfSA9IGF3YWl0IGltcG9ydChcIkByZWFjdC1lbWFpbC9yZW5kZXJcIik7XG4gICAgICAgICAgdGhpcy5yZW5kZXJBc3luYyA9IHJlbmRlckFzeW5jO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgXCJGYWlsZWQgdG8gcmVuZGVyIFJlYWN0IGNvbXBvbmVudC4gTWFrZSBzdXJlIHRvIGluc3RhbGwgYEByZWFjdC1lbWFpbC9yZW5kZXJgXCJcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBwYXlsb2FkLmh0bWwgPSBhd2FpdCB0aGlzLnJlbmRlckFzeW5jKFxuICAgICAgICBwYXlsb2FkLnJlYWN0XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIFwiL3RlbXBsYXRlc1wiLFxuICAgICAgcGFyc2VUZW1wbGF0ZVRvQXBpT3B0aW9ucyhwYXlsb2FkKVxuICAgICk7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlKGlkZW50aWZpZXIpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKFxuICAgICAgYC90ZW1wbGF0ZXMvJHtpZGVudGlmaWVyfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGdldChpZGVudGlmaWVyKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldChcbiAgICAgIGAvdGVtcGxhdGVzLyR7aWRlbnRpZmllcn1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLnJlc2VuZC5nZXQoXG4gICAgICBgL3RlbXBsYXRlcyR7Z2V0UGFnaW5hdGlvblF1ZXJ5UHJvcGVydGllcyhvcHRpb25zKX1gXG4gICAgKTtcbiAgfVxuICBkdXBsaWNhdGUoaWRlbnRpZmllcikge1xuICAgIGNvbnN0IHByb21pc2VEdXBsaWNhdGUgPSB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgYC90ZW1wbGF0ZXMvJHtpZGVudGlmaWVyfS9kdXBsaWNhdGVgXG4gICAgKTtcbiAgICByZXR1cm4gbmV3IENoYWluYWJsZVRlbXBsYXRlUmVzdWx0KFxuICAgICAgcHJvbWlzZUR1cGxpY2F0ZSxcbiAgICAgIHRoaXMucHVibGlzaC5iaW5kKHRoaXMpXG4gICAgKTtcbiAgfVxuICBhc3luYyBwdWJsaXNoKGlkZW50aWZpZXIpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIGAvdGVtcGxhdGVzLyR7aWRlbnRpZmllcn0vcHVibGlzaGBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHVwZGF0ZShpZGVudGlmaWVyLCBwYXlsb2FkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKFxuICAgICAgYC90ZW1wbGF0ZXMvJHtpZGVudGlmaWVyfWAsXG4gICAgICBwYXJzZVRlbXBsYXRlVG9BcGlPcHRpb25zKHBheWxvYWQpXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcblxuLy8gc3JjL3RvcGljcy90b3BpY3MudHNcbnZhciBUb3BpY3MgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuICAgIHRoaXMucmVzZW5kID0gcmVzZW5kO1xuICB9XG4gIGFzeW5jIGNyZWF0ZShwYXlsb2FkKSB7XG4gICAgY29uc3QgX2EgPSBwYXlsb2FkLCB7IGRlZmF1bHRTdWJzY3JpcHRpb24gfSA9IF9hLCBib2R5ID0gX19vYmpSZXN0KF9hLCBbXCJkZWZhdWx0U3Vic2NyaXB0aW9uXCJdKTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcIi90b3BpY3NcIiwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgYm9keSksIHtcbiAgICAgIGRlZmF1bHRfc3Vic2NyaXB0aW9uOiBkZWZhdWx0U3Vic2NyaXB0aW9uXG4gICAgfSkpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3QoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldChcIi90b3BpY3NcIik7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgZ2V0KGlkKSB7XG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgaGVhZGVyczogbnVsbCxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBmaWVsZC5cIixcbiAgICAgICAgICBzdGF0dXNDb2RlOiBudWxsLFxuICAgICAgICAgIG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoXG4gICAgICBgL3RvcGljcy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHVwZGF0ZShwYXlsb2FkKSB7XG4gICAgaWYgKCFwYXlsb2FkLmlkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIGZpZWxkLlwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKFxuICAgICAgYC90b3BpY3MvJHtwYXlsb2FkLmlkfWAsXG4gICAgICBwYXlsb2FkXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyByZW1vdmUoaWQpIHtcbiAgICBpZiAoIWlkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIGZpZWxkLlwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShcbiAgICAgIGAvdG9waWNzLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbn07XG5cbi8vIHNyYy93ZWJob29rcy93ZWJob29rcy50c1xuaW1wb3J0IHsgV2ViaG9vayB9IGZyb20gXCJzdml4XCI7XG52YXIgV2ViaG9va3MgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuICAgIHRoaXMucmVzZW5kID0gcmVzZW5kO1xuICB9XG4gIGFzeW5jIGNyZWF0ZShwYXlsb2FkLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIFwiL3dlYmhvb2tzXCIsXG4gICAgICBwYXlsb2FkLFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgZ2V0KGlkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldChcbiAgICAgIGAvd2ViaG9va3MvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG4gICAgY29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL3dlYmhvb2tzPyR7cXVlcnlTdHJpbmd9YCA6IFwiL3dlYmhvb2tzXCI7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHVwZGF0ZShpZCwgcGF5bG9hZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChcbiAgICAgIGAvd2ViaG9va3MvJHtpZH1gLFxuICAgICAgcGF5bG9hZFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlKGlkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShcbiAgICAgIGAvd2ViaG9va3MvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICB2ZXJpZnkocGF5bG9hZCkge1xuICAgIGNvbnN0IHdlYmhvb2sgPSBuZXcgV2ViaG9vayhwYXlsb2FkLndlYmhvb2tTZWNyZXQpO1xuICAgIHJldHVybiB3ZWJob29rLnZlcmlmeShwYXlsb2FkLnBheWxvYWQsIHtcbiAgICAgIFwic3ZpeC1pZFwiOiBwYXlsb2FkLmhlYWRlcnMuaWQsXG4gICAgICBcInN2aXgtdGltZXN0YW1wXCI6IHBheWxvYWQuaGVhZGVycy50aW1lc3RhbXAsXG4gICAgICBcInN2aXgtc2lnbmF0dXJlXCI6IHBheWxvYWQuaGVhZGVycy5zaWduYXR1cmVcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gc3JjL3Jlc2VuZC50c1xudmFyIGRlZmF1bHRCYXNlVXJsID0gXCJodHRwczovL2FwaS5yZXNlbmQuY29tXCI7XG52YXIgZGVmYXVsdFVzZXJBZ2VudCA9IGByZXNlbmQtbm9kZToke3ZlcnNpb259YDtcbnZhciBiYXNlVXJsID0gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnYgPyBwcm9jZXNzLmVudi5SRVNFTkRfQkFTRV9VUkwgfHwgZGVmYXVsdEJhc2VVcmwgOiBkZWZhdWx0QmFzZVVybDtcbnZhciB1c2VyQWdlbnQgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudiA/IHByb2Nlc3MuZW52LlJFU0VORF9VU0VSX0FHRU5UIHx8IGRlZmF1bHRVc2VyQWdlbnQgOiBkZWZhdWx0VXNlckFnZW50O1xudmFyIFJlc2VuZCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3Ioa2V5KSB7XG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgdGhpcy5hcGlLZXlzID0gbmV3IEFwaUtleXModGhpcyk7XG4gICAgdGhpcy5zZWdtZW50cyA9IG5ldyBTZWdtZW50cyh0aGlzKTtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Ugc2VnbWVudHMgaW5zdGVhZFxuICAgICAqL1xuICAgIHRoaXMuYXVkaWVuY2VzID0gdGhpcy5zZWdtZW50cztcbiAgICB0aGlzLmJhdGNoID0gbmV3IEJhdGNoKHRoaXMpO1xuICAgIHRoaXMuYnJvYWRjYXN0cyA9IG5ldyBCcm9hZGNhc3RzKHRoaXMpO1xuICAgIHRoaXMuY29udGFjdHMgPSBuZXcgQ29udGFjdHModGhpcyk7XG4gICAgdGhpcy5jb250YWN0UHJvcGVydGllcyA9IG5ldyBDb250YWN0UHJvcGVydGllcyh0aGlzKTtcbiAgICB0aGlzLmRvbWFpbnMgPSBuZXcgRG9tYWlucyh0aGlzKTtcbiAgICB0aGlzLmVtYWlscyA9IG5ldyBFbWFpbHModGhpcyk7XG4gICAgdGhpcy53ZWJob29rcyA9IG5ldyBXZWJob29rcyh0aGlzKTtcbiAgICB0aGlzLnRlbXBsYXRlcyA9IG5ldyBUZW1wbGF0ZXModGhpcyk7XG4gICAgdGhpcy50b3BpY3MgPSBuZXcgVG9waWNzKHRoaXMpO1xuICAgIGlmICgha2V5KSB7XG4gICAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnYpIHtcbiAgICAgICAgdGhpcy5rZXkgPSBwcm9jZXNzLmVudi5SRVNFTkRfQVBJX0tFWTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5rZXkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICdNaXNzaW5nIEFQSSBrZXkuIFBhc3MgaXQgdG8gdGhlIGNvbnN0cnVjdG9yIGBuZXcgUmVzZW5kKFwicmVfMTIzXCIpYCdcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoe1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMua2V5fWAsXG4gICAgICBcIlVzZXItQWdlbnRcIjogdXNlckFnZW50LFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9KTtcbiAgfVxuICBhc3luYyBmZXRjaFJlcXVlc3QocGF0aCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YmFzZVVybH0ke3BhdGh9YCwgb3B0aW9ucyk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmF3RXJyb3IgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICBlcnJvcjogSlNPTi5wYXJzZShyYXdFcnJvciksXG4gICAgICAgICAgICBoZWFkZXJzOiBPYmplY3QuZnJvbUVudHJpZXMocmVzcG9uc2UuaGVhZGVycy5lbnRyaWVzKCkpXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFN5bnRheEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiYXBwbGljYXRpb25fZXJyb3JcIixcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuIFdlIGFyZSB1bmFibGUgdG8gcHJvY2VzcyB5b3VyIHJlcXVlc3QgcmlnaHQgbm93LCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGhlYWRlcnM6IE9iamVjdC5mcm9tRW50cmllcyhyZXNwb25zZS5oZWFkZXJzLmVudHJpZXMoKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGVycm9yID0ge1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgIHN0YXR1c0NvZGU6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgIG5hbWU6IFwiYXBwbGljYXRpb25fZXJyb3JcIlxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgICBlcnJvcjogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgZXJyb3IpLCB7IG1lc3NhZ2U6IGVyci5tZXNzYWdlIH0pLFxuICAgICAgICAgICAgICBoZWFkZXJzOiBPYmplY3QuZnJvbUVudHJpZXMocmVzcG9uc2UuaGVhZGVycy5lbnRyaWVzKCkpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgaGVhZGVyczogT2JqZWN0LmZyb21FbnRyaWVzKHJlc3BvbnNlLmhlYWRlcnMuZW50cmllcygpKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgaGVhZGVyczogT2JqZWN0LmZyb21FbnRyaWVzKHJlc3BvbnNlLmhlYWRlcnMuZW50cmllcygpKVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG5hbWU6IFwiYXBwbGljYXRpb25fZXJyb3JcIixcbiAgICAgICAgICBzdGF0dXNDb2RlOiBudWxsLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGZldGNoIGRhdGEuIFRoZSByZXF1ZXN0IGNvdWxkIG5vdCBiZSByZXNvbHZlZC5cIlxuICAgICAgICB9LFxuICAgICAgICBoZWFkZXJzOiBudWxsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBhc3luYyBwb3N0KHBhdGgsIGVudGl0eSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyk7XG4gICAgaWYgKG9wdGlvbnMuaGVhZGVycykge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKS5lbnRyaWVzKCkpIHtcbiAgICAgICAgaGVhZGVycy5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmlkZW1wb3RlbmN5S2V5KSB7XG4gICAgICBoZWFkZXJzLnNldChcIklkZW1wb3RlbmN5LUtleVwiLCBvcHRpb25zLmlkZW1wb3RlbmN5S2V5KTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShlbnRpdHkpXG4gICAgfSwgb3B0aW9ucyksIHtcbiAgICAgIGhlYWRlcnNcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIGdldChwYXRoLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKTtcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpLmVudHJpZXMoKSkge1xuICAgICAgICBoZWFkZXJzLnNldChrZXksIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgIH0sIG9wdGlvbnMpLCB7XG4gICAgICBoZWFkZXJzXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zKTtcbiAgfVxuICBhc3luYyBwdXQocGF0aCwgZW50aXR5LCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKTtcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpLmVudHJpZXMoKSkge1xuICAgICAgICBoZWFkZXJzLnNldChrZXksIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGVudGl0eSlcbiAgICB9LCBvcHRpb25zKSwge1xuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChwYXRoLCByZXF1ZXN0T3B0aW9ucyk7XG4gIH1cbiAgYXN5bmMgcGF0Y2gocGF0aCwgZW50aXR5LCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKTtcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpLmVudHJpZXMoKSkge1xuICAgICAgICBoZWFkZXJzLnNldChrZXksIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZW50aXR5KVxuICAgIH0sIG9wdGlvbnMpLCB7XG4gICAgICBoZWFkZXJzXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zKTtcbiAgfVxuICBhc3luYyBkZWxldGUocGF0aCwgcXVlcnkpIHtcbiAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHF1ZXJ5KSxcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zKTtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIFJlc2VuZFxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/resend/dist/index.mjs\n");

/***/ })

};
;